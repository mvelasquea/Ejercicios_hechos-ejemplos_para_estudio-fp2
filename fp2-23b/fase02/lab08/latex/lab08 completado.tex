%package list
\documentclass{article}
\usepackage[top=3cm, bottom=3cm, outer=3cm, inner=3cm]{geometry}
\usepackage{multicol}
\usepackage{graphicx}
\usepackage{url}
%\usepackage{cite}
\usepackage{hyperref}
\usepackage{array}
%\usepackage{multicol}
\newcolumntype{x}[1]{>{\centering\arraybackslash\hspace{0pt}}p{#1}}
\usepackage{natbib}
\usepackage{pdfpages}
\usepackage{multirow}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}
\usepackage{svg}
\usepackage{xcolor}
\usepackage{listings}
\lstdefinestyle{ascii-tree}{
    literate={├}{|}1 {─}{--}1 {└}{+}1 
  }
\lstset{basicstyle=\ttfamily,
  showstringspaces=false,
  commentstyle=\color{red},
  keywordstyle=\color{blue}
}
%\usepackage{booktabs}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float}
\usepackage{array}

\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}
\newcolumntype{N}{@{}m{0pt}@{}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\itemEmail}{mvelasquea@unsa.edu.pe}
\newcommand{\itemStudent}{Mikhail Gabino Velasque Arcos}
\newcommand{\itemCourse}{Laboratorio FUNDAMENTOS DE LA PROGRAMACION II}
\newcommand{\itemCourseCode}{20214260}
\newcommand{\itemSemester}{II}
\newcommand{\itemUniversity}{Universidad Nacional de San Agustín de Arequipa}
\newcommand{\itemFaculty}{Facultad de Ingeniería de Producción y Servicios}
\newcommand{\itemDepartment}{Departamento Académico de Ingeniería de Sistemas e Informática}
\newcommand{\itemSchool}{Escuela Profesional de Ingeniería de Sistemas}
\newcommand{\itemAcademic}{2023 - B}
\newcommand{\itemInput}{Del  18 de Octubre 2023}
\newcommand{\itemOutput}{Al 22 de Octubre 2023}
\newcommand{\itemPracticeNumber}{08}
\newcommand{\itemTheme}{HashMap}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[english,spanish]{babel}
\usepackage[utf8]{inputenc}
\AtBeginDocument{\selectlanguage{spanish}}
\renewcommand{\figurename}{Figura}
\renewcommand{\refname}{Referencias}
\renewcommand{\tablename}{Tabla} %esto no funciona cuando se usa babel
\AtBeginDocument{%
	\renewcommand\tablename{Tabla}
}

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\setlength{\headheight}{30pt}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
\fancyhead[L]{\raisebox{-0.2\height}{\includegraphics[width=3cm]{img/logo_episunsa.png}}}
\fancyhead[C]{\fontsize{7}{7}\selectfont	\itemUniversity \\ \itemFaculty \\ \itemDepartment \\ \itemSchool \\ \textbf{\itemCourse}}
\fancyhead[R]{\raisebox{-0.2\height}{\includegraphics[width=1.2cm]{img/logo_abet}}}
\fancyfoot[L]{Estudiante Mikhail Gabino Velasque Arcos}
\fancyfoot[C]{\itemCourse}
\fancyfoot[R]{Página \thepage}

% para el codigo fuente
\usepackage{listings}
\usepackage{color, colortbl}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{codebackground}{rgb}{0.95, 0.95, 0.92}
\definecolor{tablebackground}{rgb}{0.8, 0, 0}

\lstset{frame=tb,
	language=bash,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=none,
	numberstyle=\tiny\color{gray},
	keywordstyle=\color{blue},
	commentstyle=\color{dkgreen},
	stringstyle=\color{mauve},
	breaklines=true,
	breakatwhitespace=true,
	tabsize=3,
	backgroundcolor= \color{codebackground},
}

\begin{document}
	
	\vspace*{10px}
	
	\begin{center}	
		\fontsize{17}{17} \textbf{ Informe de Laboratorio 06 }
	\end{center}
	\centerline{\textbf{\Large Tema: Arraylist}}
	%\vspace*{0.5cm}	

	\begin{flushright}
		\begin{tabular}{|M{2.5cm}|N|}
			\hline 
			\rowcolor{tablebackground}
			\color{white} \textbf{Nota}  \\
			\hline 
			     \\[30pt]
			\hline 			
		\end{tabular}
	\end{flushright}	

	\begin{table}[H]
		\begin{tabular}{|x{4.7cm}|x{4.8cm}|x{4.8cm}|}
			\hline 
			\rowcolor{tablebackground}
			\color{white} \textbf{Estudiante} & \color{white}\textbf{Escuela}  & \color{white}\textbf{Asignatura}   \\
			\hline 
			{\itemStudent \par \itemEmail} & \itemSchool & {\itemCourse \par Semestre: \itemSemester \par Código: \itemCourseCode}     \\
			\hline 			
		\end{tabular}
	\end{table}		
	
	\begin{table}[H]
		\begin{tabular}{|x{4.7cm}|x{4.8cm}|x{4.8cm}|}
			\hline 
			\rowcolor{tablebackground}
			\color{white}\textbf{Laboratorio} & \color{white}\textbf{Tema}  & \color{white}\textbf{Duración}   \\
			\hline 
			\itemPracticeNumber & \itemTheme & 04 horas   \\
			\hline 
		\end{tabular}
	\end{table}
	
	\begin{table}[H]
		\begin{tabular}{|x{4.7cm}|x{4.8cm}|x{4.8cm}|}
			\hline 
			\rowcolor{tablebackground}
			\color{white}\textbf{Semestre académico} & \color{white}\textbf{Fecha de inicio}  & \color{white}\textbf{Fecha de entrega}   \\
			\hline 
			\itemAcademic & \itemInput &  \itemOutput  \\
			\hline 
		\end{tabular}
	\end{table}
	
	\section{Actividades}
	\begin{itemize}		
		\item Cree un Proyecto llamado Laboratorio 8
		\item Usted deberá crear las dos clases Soldado.java y VideoJuego_v5.java. 
		\item Puede reutilizar lo desarrollado en Laboratorios anteriores.
		\item Del Soldado nos importa el nombre, puntos de vida, fila y columna (posición en el tablero).
		
\item Tendrá 2 Ejércitos (usar HashMaps). Inicializar el tablero con n soldados aleatorios entre 1 y
10 para cada Ejército. Cada soldado tendrá un nombre autogenerado: Soldado0X1,
Soldado1X1, etc., un valor de puntos de vida autogenerado aleatoriamente [1..5], la fila y
columna también autogenerados aleatoriamente (no puede haber 2 soldados en el mismo
cuadrado). Se debe mostrar el tablero con todos los soldados creados (distinguir los de un
ejército de los del otro ejército). Además de los datos del Soldado con mayor vida de cada
ejército, el promedio de puntos de vida de todos los soldados creados por ejército, los datos
de todos los soldados por ejército en el orden que fueron creados y un ranking de poder de
todos los soldados creados por ejército (del que tiene más nivel de vida al que tiene menos)
usando 2 diferentes algoritmos de ordenamiento (indicar conclusiones respecto a este ordenamiento de HashMaps). Finalmente, que muestre qué ejército ganará la batalla (indicar
la métrica usada para decidir al ganador de la batalla). Hacerlo como programa iterativo.

	
	\end{itemize}
		
	\section{SOLUCIONARIO}
	\begin{itemize}
		\item Se usa parte del codigo anterior de los anteriores laboratorios
	\end{itemize}

	\subsection{CODIGO FUENTE}
	\begin{itemize}	
		\item Se crea la clase soldado.java
		\item Se crea la clase principal:   VideJuego_v5.java
\item 	Se hace el uso del hashmap dentro de la creacion de los ejercitos  y en el ordenamiento 
			
	\end{itemize}
	
	\begin{lstlisting}[language=bash,caption={Creando la clase soldado y la clase VideoJuego_v4}][H]
		vim soldado.java
		  vim VideoJuego_v5.java
	\end{lstlisting}
	
	\begin{lstlisting}[language=bash,caption={Creando la clase Soldado}][H]
			
	public class Soldado {
		/*
		 Reusando el codiogo de los anterioes labs
		
			 laboratorio Nro 6 ejercicio 1
			 //clase soldado
			 Autor :Mikhail Gabino Velasque Arcos
			colaboro:---
			tiempo:
			 */
	   private String nombre;
	    private int puntosDeVida;
	    private int fila;
	    private int columna;

	    public Soldado(String nombre, int puntosDeVida) {
	        this.nombre = nombre;
	        this.puntosDeVida = puntosDeVida;
	    }

	    public String getNombre() {
	        return nombre;
	    }

	    public int getPuntosDeVida() {
	        return puntosDeVida;
	    }

	    public void setPuntosDeVida(int puntosDeVida) {
	        this.puntosDeVida = puntosDeVida;
	    }

	    public int getFila() {
	        return fila;
	    }

	    public void setFila(int fila) {
	        this.fila = fila;
	    }

	    public int getColumna() {
	        return columna;
	    }

	    public void setColumna(int columna) {
	        this.columna = columna;
	    }

	    @Override
	    public String toString() {
	        return "Nombre: " + nombre + ", Vida: " + puntosDeVida + ", Fila: " + fila + ", Columna: " + columna;
	    }
	}
	
	\end{lstlisting}	
	\begin{lstlisting}[language=bash,caption={Creando la clase principal de VideoJuego_v5.java}][H]
	
	
		import java.util.*;
import java.util.stream.Collectors;
public class VideoJuego_v5 {
public static void main(String args[]) {
	/*
	 Reusando el codiogo de los anterioes labs
	
		 laboratorio Nro 8 ejercicio 1
		 //clase principal usando hasmap
		 Autor :Mikhail Gabino Velasque Arcos
		colaboro:---
		tiempo:
		 */
	        int filas = 10;
	        int columnas = 10;
	        int n = new Random().nextInt(10) + 1;
	        HashMap<String, Soldado> ejercito1 = crearEjercito(n, filas, columnas, "E1");
	        HashMap<String, Soldado> ejercito2 = crearEjercito(n, filas, columnas, "E2");

	        mostrarTablero(filas, columnas, ejercito1, ejercito2);

	        System.out.println("\nEjército 1:");
	        mostrarEstadisticas(ejercito1);

	        System.out.println("\nEjército 2:");
	        mostrarEstadisticas(ejercito2);

	        String ganador = determinarGanador(ejercito1, ejercito2);
	        System.out.println("\nEl ejército ganador es: " + ganador);
	    }

	    public static HashMap<String, Soldado> crearEjercito(int n, int filas, int columnas, String ejercitoPrefix) {
	        HashMap<String, Soldado> ejercito = new HashMap<>();
	        Random rand = new Random();
	        for (int i = 1; i <= n; i++) {
	            String nombre = ejercitoPrefix + "-" + i;
	            int puntosDeVida = rand.nextInt(5) + 1;

	            String posicion;
	            do {
	                int fila = rand.nextInt(filas) + 1;
	                int columna = rand.nextInt(columnas) + 1;
	                posicion = fila + "-" + columna;
	            } while (ejercito.containsKey(posicion));
	            Soldado soldado = new Soldado(nombre, puntosDeVida);
	            ejercito.put(posicion, soldado);
	        }
	        return ejercito;
	    }

	    public static void mostrarTablero(int filas, int columnas, HashMap<String, Soldado> ejercito1, HashMap<String, Soldado> ejercito2) {
	        for (int fila = 1; fila <= filas; fila++) {
	            for (int columna = 1; columna <= columnas; columna++) {
	                String posicion = fila + "-" + columna;
	                Soldado soldado1 = ejercito1.get(posicion);
	                Soldado soldado2 = ejercito2.get(posicion);
	                if (soldado1 != null) {
	                    System.out.print("|" + soldado1.getNombre() + "|");
	                } else if (soldado2 != null) {
	                    System.out.print("|" + soldado2.getNombre() + "|");
	                } else {
	                    System.out.print("|____|");
	                }
	            }
	            System.out.println();
	        }
	    }

	    public static void mostrarEstadisticas(HashMap<String, Soldado> ejercito) {
	        List<Soldado> soldados = new ArrayList<>(ejercito.values());
	        int totalVida = soldados.stream().mapToInt(Soldado::getPuntosDeVida).sum();
	        Soldado maxVida = soldados.stream().max(Comparator.comparing(Soldado::getPuntosDeVida)).orElse(null);

	        System.out.println("Puntos de vida promedio: " + (double) totalVida / soldados.size());
	        System.out.println("Soldado con mayor vida: " + maxVida);

	        System.out.println("\nLista de Soldados:");
	        soldados.forEach(System.out::println);

	        System.out.println("\nRanking de poder:");
	        ordenarSoldadosPorPuntosDeVida(soldados);

	        soldados.forEach(System.out::println);
	    }

	    public static void ordenarSoldadosPorPuntosDeVida(List<Soldado> soldados) {
	        soldados.sort(Comparator.comparing(Soldado::getPuntosDeVida).reversed());
	    }

	    public static String determinarGanador(HashMap<String, Soldado> ejercito1, HashMap<String, Soldado> ejercito2) {
	        int totalVidaEjercito1 = calcularTotalVida(ejercito1);
	        int totalVidaEjercito2 = calcularTotalVida(ejercito2);
	        if (totalVidaEjercito1 > totalVidaEjercito2) {
	            return "Ejército 1 (E1)";
	        } else if (totalVidaEjercito1 < totalVidaEjercito2) {
	            return "Ejército 2 (E2)";
	        } else {
	            return "Empate";
	        }
	    }

	    public static int calcularTotalVida(HashMap<String, Soldado> ejercito) {
	        return ejercito.values().stream().mapToInt(Soldado::getPuntosDeVida).sum();
	    }
	}

				\end{lstlisting}
			
			\includegraphics[scale=1]{img/Captura 1.PNG} 
		
\end{document}